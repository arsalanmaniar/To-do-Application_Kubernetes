# API Contract: Todo Application Frontend-Backend Integration

## Overview
This document defines the API contract between the Next.js frontend and FastAPI backend for the Todo application, including authentication and task management endpoints.

## Base URL
```
http://localhost:8000/api/v1
```

## Authentication Endpoints

### POST /auth/register
Register a new user account.

**Request**:
```json
{
  "email": "user@example.com",
  "password": "securePassword123"
}
```

**Response (200)**:
```json
{
  "id": "uuid-string",
  "email": "user@example.com",
  "is_active": true,
  "created_at": "2023-01-01T00:00:00.000000"
}
```

**Response (400)**:
```json
{
  "detail": "Error message"
}
```

### POST /auth/login
Authenticate a user and return JWT token.

**Request**:
```json
{
  "email": "user@example.com",
  "password": "securePassword123"
}
```

**Response (200)**:
```json
{
  "access_token": "jwt-token-string",
  "token_type": "bearer",
  "expires_in": 1800
}
```

**Response (401)**:
```json
{
  "detail": "Invalid credentials"
}
```

## Task Management Endpoints

### GET /tasks
Retrieve all tasks for the authenticated user.

**Headers**:
```
Authorization: Bearer {jwt_token}
```

**Response (200)**:
```json
{
  "tasks": [
    {
      "id": "uuid-string",
      "title": "Sample Task",
      "description": "Task description",
      "completed": false,
      "owner_id": "user-uuid",
      "created_at": "2023-01-01T00:00:00.000000",
      "updated_at": "2023-01-01T00:00:00.000000"
    }
  ],
  "total": 1,
  "limit": 50,
  "offset": 0
}
```

### POST /tasks
Create a new task for the authenticated user.

**Headers**:
```
Authorization: Bearer {jwt_token}
```

**Request**:
```json
{
  "title": "New Task",
  "description": "Task description",
  "completed": false
}
```

**Response (201)**:
```json
{
  "id": "uuid-string",
  "title": "New Task",
  "description": "Task description",
  "completed": false,
  "owner_id": "user-uuid",
  "created_at": "2023-01-01T00:00:00.000000",
  "updated_at": "2023-01-01T00:00:00.000000"
}
```

### PUT /tasks/{task_id}
Update an existing task.

**Headers**:
```
Authorization: Bearer {jwt_token}
```

**Request**:
```json
{
  "title": "Updated Task",
  "description": "Updated description",
  "completed": true
}
```

**Response (200)**:
```json
{
  "id": "uuid-string",
  "title": "Updated Task",
  "description": "Updated description",
  "completed": true,
  "owner_id": "user-uuid",
  "created_at": "2023-01-01T00:00:00.000000",
  "updated_at": "2023-01-01T00:00:00.000000"
}
```

### DELETE /tasks/{task_id}
Delete a task.

**Headers**:
```
Authorization: Bearer {jwt_token}
```

**Response (204)**:
No content returned.

**Response (404)**:
```json
{
  "detail": "Task not found"
}
```

## Error Responses

All endpoints may return the following error responses:

**401 Unauthorized**:
```json
{
  "detail": "Not authenticated"
}
```

**403 Forbidden**:
```json
{
  "detail": "Access denied"
}
```

**422 Validation Error**:
```json
{
  "detail": [
    {
      "loc": ["body", "email"],
      "msg": "field required",
      "type": "value_error.missing"
    }
  ]
}
```

**500 Internal Server Error**:
```json
{
  "detail": "Internal server error"
}
```

## Authentication Requirements
- All task endpoints require a valid JWT token in the Authorization header
- Tokens expire after 30 minutes (1800 seconds)
- The backend validates JWT tokens independently
- User data isolation is enforced - users can only access their own tasks